{"version":3,"sources":["log.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;;;;;;;;;;;AAEb,SAAS,GAAG,CAAC,GAAG,EAAE;AAChB,KAAG,CAAC,GAAG,4BAAC,iBAAW,IAAI;QACjB,IAAI,EAOJ,KAAK,EACL,GAAG,EACH,GAAG;;;;;AATH,gBAAI,GAAG,IAAI;;;;AAGf,gBAAI,CAAC,KAAK,GAAG,UAAC,EAAE,EAAE,IAAI,EAAE,IAAI,EAAK;AAC/B,kBAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,EAAE,EAAE,EAAE,EAAG,EAAE,EAAE,IAAI,EAAG,IAAI,EAAE,IAAI,EAAG,IAAI,EAAE,CAAC,CAAC;aAC9D,CAAA;;AAEG,iBAAK,GAAG,IAAI,IAAI,EAAA;AAChB,eAAG,GAAK,IAAI,IAAI,EAAA;AAChB,eAAG,GAAK,IAAI,CAAC,OAAO;0CAEjB,IAAI;;;;AAEX,gBAAI,CAAC,KAAK,CAAC,GAAG,GAAG,KAAK,EAAE,kBAAkB,EAAK,GAAG,CAAC,MAAM,SAAI,GAAG,CAAC,GAAG,CAAG,CAAC;;;;;;;;GACzE,EAAC,CAAC;;AAEH,SAAO,GAAG,CAAC;CACZ;;kBAEc,GAAG","file":"log.js","sourcesContent":["'use strict';\n\nfunction log(app) {\n  app.use(function *(next) {\n    let self = this;\n\n    // Add error and performance tracking shorthands\n    this.stats = (ms, type, data) => {\n      self.app.emit('perf', { ms : ms, type : type, data : data });\n    }\n\n    let start = new Date;\n    let end   = new Date;\n    let req   = this.request;\n\n    yield *next;\n\n    this.stats(end - start, 'page performance', `${req.method} ${req.url}`);\n  });\n\n  return app;\n}\n\nexport default log;"],"sourceRoot":"/source/"}