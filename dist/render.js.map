{"version":3,"sources":["render.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;;;;;;;;;;;;;;;;;;;AAMb,SAAS,MAAM,CAAC,GAAG,EAAE;AACnB,MAAI,IAAI,GAAK,GAAG,CAAC,IAAI,CAAC;AACtB,MAAI,IAAI,GAAK,IAAI,CAAC,UAAU,CAAC,CAAC;AAC9B,MAAI,IAAI,GAAK,IAAI,CAAC,UAAU,CAAC,CAAC;AAC9B,MAAI,KAAK,GAAI,IAAI,CAAC,WAAW,CAAC,CAAC;AAC/B,MAAI,GAAG,GAAM,IAAI,CAAC;AAClB,MAAI,GAAG,GAAM,IAAI,CAAC;AAClB,MAAI,MAAM,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,MAAM;;;AAAC,AAG3C,MAAI,CAAC,IAAI,IAAI,IAAI,EAAE;AACjB,OAAG,GAAG,IAAI,CAAC;GACZ,MAAM,IAAI,IAAI,IAAI,IAAI,EAAE;AACvB,OAAG,GAAG,eAAK,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;GAC7B;;;AAAA,AAGD,MAAI,CAAC,IAAI,IAAI,KAAK,EAAE;AAClB,OAAG,GAAG,KAAK,CAAC;GACb,MAAM,IAAI,IAAI,IAAI,KAAK,EAAE;AACxB,OAAG,GAAG,eAAK,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;GAC9B;;AAED,KAAG,CAAC,GAAG,CAAC,yBAAO,GAAG,CAAC,CAAC,CAAC;;AAErB,KAAG,CAAC,GAAG,CAAC,wBAAM,GAAG,EAAE;AACjB,OAAG,EAAG,EAAE,IAAI,EAAG,MAAM,EAAE;GACxB,CAAC,CAAC,CAAC;;AAEJ,SAAO,GAAG,CAAC;CACZ;;kBAEc,MAAM","file":"render.js","sourcesContent":["'use strict';\n\nimport path from 'path';\nimport views from 'koa-views';\nimport assets from 'koa-static';\n\nfunction render(app) {\n  let conf   = app.conf;\n  let base   = conf['base dir'];\n  let view   = conf['view dir'];\n  let asset  = conf['asset dir'];\n  let dir    = base;\n  let ass    = base;\n  let engine = conf['view engine'] || 'swig';\n\n  // Detemrine the directory to load views from.\n  if (!base && view) {\n    dir = view;\n  } else if (base && view) {\n    dir = path.join(base, view);\n  }\n\n  // Determine the directory to load assets from.\n  if (!base && asset) {\n    ass = asset;\n  } else if (base && asset) {\n    ass = path.join(base, asset);\n  }\n\n  app.use(assets(ass));\n\n  app.use(views(dir, {\n    map : { html : engine }\n  }));\n\n  return app;\n}\n\nexport default render;"],"sourceRoot":"/source/"}